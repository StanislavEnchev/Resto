<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>–†–µ—Å—Ç–æ—Ç–æ –º–∏!</title>

<style>
  body {
    background-color: #f2e5d5;
    font-family: Arial, sans-serif;
    padding: 20px;
    text-align: left;
  }

  h1 {
    font-size: 28px;
    margin-bottom: 10px;
    text-align: center;
  }

  .iconBar {
    text-align: center;
    margin-bottom: 20px;
  }

  label {
    display: block;
    margin-top: 15px;
    font-weight: bold;
  }

  input, select {
    padding: 10px;
    margin-top: 5px;
    border-radius: 6px;
    border: 1px solid #aaa;
    background: #ffffff;
    font-size: 16px;
  }

  /* –ú–∞–ª–∫–æ –ø–æ-–¥—ä–ª–≥–æ –ø–æ–ª–µ –∑–∞ –≤–∞–ª—É—Ç–∞ */
  .currency-small {
    width: 40%;
    display: inline-block;
  }

  .full {
    width: 100%;
  }

  .iconBtn {
    background: none;
    border: none;
    font-size: 18px;
    cursor: pointer;
    padding: 2px 6px;
  }

  #result {
    margin-top: 25px;
    font-size: 18px;
    font-weight: bold;
  }

  .rateLine {
    font-size: 14px;
    opacity: 0.85;
    margin: 4px 0;
  }

  /* –î–æ–ª–Ω–∞ –±–µ–ª–µ–∂–∫–∞ –∑–∞ –∞–≤—Ç–æ—Ä–∞ */
  .author {
    text-align: center;
    margin-top: 40px;
    font-size: 16px;
    color: #3399ff;
  }
  .author a {
    color: #3399ff;
    text-decoration: none;
  }
  .author a:hover {
    text-decoration: underline;
  }

  body.dark { 
    background-color: #1e1e1e; 
    color: #f2f2f2; 
  }
  body.dark input, body.dark select {
    background: #333;
    color: #fff;
    border: 1px solid #666;
  }
  body.dark .author {
    color: #66b3ff;
  }
  body.dark .author a {
    color: #66b3ff;
  }
</style>

</head>
<body>

<h1>–†–µ—Å—Ç–æ—Ç–æ –º–∏!</h1>

<div class="iconBar">
  <button class="iconBtn" onclick="toggleDarkMode()">üåô</button>
  <button class="iconBtn" onclick="toggleLanguage()">üåê</button>
  <button class="iconBtn" onclick="clearFields()">üßπ</button>
</div>

<label>–¶–µ–Ω–∞:</label>
<input type="number" step="0.01" id="price" placeholder="0" class="full" oninput="calculate()" />

<label>–í–∞–ª—É—Ç–∞:</label>
<select id="currency" class="currency-small" oninput="calculate()">
  <option value="EUR">EUR (‚Ç¨)</option>
  <option value="BGN">BGN (–ª–≤.)</option>
</select>

<label>–°—É–º–∞ –Ω–∞ –ø–ª–∞—â–∞–Ω–µ (–ª–≤.):</label>
<input type="number" step="0.01" id="paid" placeholder="0" class="full" oninput="calculate()" />

<div id="result"></div>

<!-- –ê–≤—Ç–æ—Ä -->
<div class="author">
  <a href="https://www.facebook.com/share/1GMumgTzrr/" target="_blank" id="authorText">–æ—Ç –°—Ç–∞–Ω–∏—Å–ª–∞–≤ –ï–Ω—á–µ–≤</a>
</div>

<script>
function toggleDarkMode() {
  document.body.classList.toggle('dark');
}

function calculate() {
  const priceInput = parseFloat(document.getElementById('price').value.replace(',', '.'));
  const paidBGN = parseFloat(document.getElementById('paid').value);
  const currency = document.getElementById('currency').value;
  const rate = 1.95583;
  const lang = document.documentElement.lang;

  if (isNaN(priceInput) || isNaN(paidBGN)) {
    document.getElementById('result').innerHTML =
      lang === 'bg' ? '–ú–æ–ª—è, –ø–æ–ø—ä–ª–Ω–µ—Ç–µ –≤—Å–∏—á–∫–∏ –ø–æ–ª–µ—Ç–∞.' : 'Please fill in all fields.';
    return;
  }

  let priceBGN = 0, priceEUR = 0;
  if (currency === 'EUR') {
    priceEUR = priceInput;
    priceBGN = priceInput * rate;
  } else {
    priceBGN = priceInput;
    priceEUR = priceInput / rate;
  }

  const changeBGN = paidBGN - priceBGN;
  const changeEUR = changeBGN / rate;

  document.getElementById('result').innerHTML =
    lang === 'bg'
      ? `–¶–µ–Ω–∞: ${priceBGN.toFixed(2)} –ª–≤. (${priceEUR.toFixed(2)} ‚Ç¨)<br>
         <span class="rateLine">–ö—É—Ä—Å: 1 ‚Ç¨ = ${rate} –ª–≤.</span><br>
         –†–µ—Å—Ç–æ: ${changeBGN.toFixed(2)} –ª–≤. (${changeEUR.toFixed(2)} ‚Ç¨)`
      : `Price: ${priceBGN.toFixed(2)} lv. (${priceEUR.toFixed(2)} ‚Ç¨)<br>
         <span class="rateLine">Rate: 1 ‚Ç¨ = ${rate} lv.</span><br>
         Change: ${changeBGN.toFixed(2)} lv. (${changeEUR.toFixed(2)} ‚Ç¨)`;
}

function clearFields() {
  document.getElementById('price').value = '';
  document.getElementById('paid').value = '';
  document.getElementById('result').innerHTML = '';
}

function toggleLanguage() {
  const current = document.documentElement.lang;

  if (current === 'bg') {
    document.documentElement.lang = 'en';
    document.querySelector('h1').textContent = 'My Change!';
    document.querySelectorAll('label')[0].textContent = 'Price:';
    document.querySelectorAll('label')[1].textContent = 'Currency:';
    document.querySelectorAll('label')[2].textContent = 'Amount Paid (BGN):';
    document.getElementById('authorText').textContent = 'by Stanislav Enchev';
  } else {
    document.documentElement.lang = 'bg';
    document.querySelector('h1').textContent = '–†–µ—Å—Ç–æ—Ç–æ –º–∏!';
    document.querySelectorAll('label')[0].textContent = '–¶–µ–Ω–∞:';
    document.querySelectorAll('label')[1].textContent = '–í–∞–ª—É—Ç–∞:';
    document.querySelectorAll('label')[2].textContent = '–°—É–º–∞ –Ω–∞ –ø–ª–∞—â–∞–Ω–µ (–ª–≤.):';
    document.getElementById('authorText').textContent = '–æ—Ç –°—Ç–∞–Ω–∏—Å–ª–∞–≤ –ï–Ω—á–µ–≤';
  }

  calculate();
}
</script>

</body>
</html>
